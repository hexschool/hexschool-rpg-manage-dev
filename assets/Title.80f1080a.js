import{a as C}from"./assistant.68cb06e3.js";import{r as d,s as F,z as f,a as h,e as A,f as y,A as l,b as e,E as v,M as B,D,o as V,B as q,c as x,F as R,q as z,x as k,$ as E,g as M,h as w}from"./index.4bfca30a.js";const N={class:"mb-3"},U=e("label",{for:"addTitle",class:"form-label text-dark"},"\u7A31\u865F",-1),S={class:"mb-3"},j=e("label",{for:"titleLevel",class:"form-label text-dark"},"\u7B49\u7D1A",-1),O={class:"mb-3"},G=e("label",{for:"titleColor",class:"form-label text-dark"},"\u4EE3\u8868\u8272",-1),P={class:"mb-3"},H=e("label",{for:"titleDescription",class:"form-label text-dark"},"\u63CF\u8FF0",-1),I=["disabled"],J={__name:"CreateTitleModal",props:{tempTitle:{type:Object,default(){return{}}}},emits:["createTitleMethod"],setup($,{expose:g,emit:r}){const _=$,{apiPostAssistantTitleDetail:b}=C,m=d(),s=d({}),u=d(null);F(()=>_.tempTitle.name,()=>{s.value=_.tempTitle});const T=async()=>{try{const n={name:s.value.name,level:Number(s.value.level),color_code:s.value.color_code,description:s.value.description};await b(n),r("createTitleMethod",{target:"import",type:"\u6210\u529F"}),m.value.resetForm()}catch(n){r("createTitleMethod",{target:"import",type:"\u5931\u6557",error:`${n.response.data.statusCode}:${n.response.data.message}`})}};return g({createTitleModalRef:u}),(n,t)=>{const o=f("Field"),c=f("ErrorMessage"),a=f("VForm");return h(),A(a,{ref_key:"refs",ref:m,onSubmit:T},{default:y(({errors:p,meta:L})=>[l(B,{ref_key:"createTitleModalRef",ref:u,"has-footer":!0,title:"\u65B0\u589E\u52A9\u6559\u7A31\u865F","class-list":""},{body:y(()=>[e("div",N,[U,l(o,{id:"addTitle",modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=i=>s.value.name=i),name:"\u7A31\u865F",type:"text",class:v(["form-control",{"is-invalid":p.\u7A31\u865F}]),rules:"required"},null,8,["modelValue","class"]),l(c,{name:"\u7A31\u865F",class:"invalid-feedback"})]),e("div",S,[j,l(o,{id:"titleLevel",modelValue:s.value.level,"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.level=i),name:"\u7B49\u7D1A",type:"text",class:v(["form-control",{"is-invalid":p.\u7B49\u7D1A}]),rules:"required|numeric"},null,8,["modelValue","class"]),l(c,{name:"\u7B49\u7D1A",class:"invalid-feedback"})]),e("div",O,[G,l(o,{id:"titleColor",modelValue:s.value.color_code,"onUpdate:modelValue":t[2]||(t[2]=i=>s.value.color_code=i),name:"\u4EE3\u8868\u8272",type:"color",class:v(["form-control form-control-color",{"is-invalid":p.\u4EE3\u8868\u8272}]),rules:"required"},null,8,["modelValue","class"]),l(c,{name:"\u4EE3\u8868\u8272",class:"invalid-feedback"})]),e("div",P,[H,l(o,{id:"titleDescription",modelValue:s.value.description,"onUpdate:modelValue":t[3]||(t[3]=i=>s.value.description=i),as:"textarea",name:"\u63CF\u8FF0",type:"text",class:v(["form-control",{"is-invalid":p.\u63CF\u8FF0}]),rules:"required"},null,8,["modelValue","class"]),l(c,{name:"\u63CF\u8FF0",class:"invalid-feedback"})])]),footer:y(()=>[e("button",{type:"submit",disabled:!L.valid,class:"btn btn-primary"}," \u5EFA\u7ACB ",8,I)]),_:2},1536)]),_:1},512)}}},K={class:"about px-4 mt-4 position-relative"},Q={class:"d-flex align-items-center justify-content-between"},W=e("h1",{class:"fs-4 mb-0"}," \u52A9\u6559\u7A31\u865F ",-1),X=e("hr",null,null,-1),Y={class:"card shadow-sm rounded-4 overflow-hidden mb-4"},Z={class:"card-body p-0"},ee={class:"table-responsive"},te={class:"table table-hover mb-0 text-nowrap",style:{"font-size":"14px"}},se=e("thead",{class:"bg-light"},[e("tr",null,[e("th",{scope:"col",class:"ps-4 py-3 text-muted border-0"}," \u7A31\u865F "),e("th",{scope:"col",class:"py-3 text-muted border-0"}," \u7B49\u7D1A "),e("th",{scope:"col",class:"py-3 text-muted pe-3 border-0"}," \u7DE8\u8F2F ")])],-1),oe={class:"text-nowrap"},le={scope:"row",class:"ps-4"},ae={class:"pe-3"},ne=e("span",{class:"material-icons align-middle fs-6"}," edit",-1),ie=["onClick"],de=e("span",{class:"material-icons align-middle fs-6"}," content_copy ",-1),me={__name:"Title",setup($){const{apiGetAssistantsTitles:g}=C,r=d(""),_=D.useLoading(),b=d([]),m=async()=>{const t=_.show();try{const{assistant_titles:o}=await g();b.value=o}catch(o){k("danger","\u53D6\u5F97\u52A9\u6559\u7A31\u865F\u5217\u8868\u5931\u6557",`${o.response.data.statusCode}:${o.response.data.message}`)}finally{t.hide()}};V(m);const s=d({}),u=(t,o)=>{t==="copy"?s.value={...o}:t==="add"&&(s.value={}),r.value.show()},T=t=>{t.type==="\u6210\u529F"?k("success","\u5EFA\u7ACB\u52A9\u6559\u7A31\u865F\u6210\u529F","\u5DF2\u6210\u529F\u5EFA\u7ACB\u52A9\u6559\u7A31\u865F"):t.type==="\u5931\u6557"&&k("danger","\u5EFA\u7ACB\u52A9\u6559\u7A31\u865F\u5931\u6557",t.error),r.value.hide(),m()},n=d(null);return V(()=>{r.value=new q(n.value.createTitleModalRef.hModal)}),(t,o)=>{const c=f("router-link");return h(),x("div",K,[e("header",Q,[W,e("button",{type:"button",class:"btn btn-primary",onClick:o[0]||(o[0]=a=>u("add"))}," \u65B0\u589E\u7A31\u865F ")]),X,e("div",Y,[e("div",Z,[e("div",ee,[e("table",te,[se,e("tbody",oe,[(h(!0),x(R,null,z(b.value,a=>(h(),x("tr",{key:a.id,class:"align-middle"},[e("td",le,[e("span",{class:"d-inline-block rounded-pill",style:E([{width:"10px",height:"10px"},`background-color:${a.color_code}`])},null,4),M(" "+w(a.name),1)]),e("td",null,w(a.level),1),e("td",ae,[l(c,{to:`/admin/assistants/title/${a.id}`,class:"btn btn-sm btn-outline-gray me-2"},{default:y(()=>[M(" \u7DE8\u8F2F"),ne]),_:2},1032,["to"]),e("button",{type:"button",class:"btn btn-sm btn-outline-gray me-2",onClick:p=>u("copy",a)},[M(" \u8907\u88FD"),de],8,ie)])]))),128))])])])])]),l(J,{ref_key:"createTitleModalComponentRef",ref:n,"temp-title":s.value,onCreateTitleMethod:T},null,8,["temp-title"])])}}};export{me as default};
