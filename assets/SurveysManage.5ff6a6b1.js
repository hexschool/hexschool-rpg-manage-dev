import{r as g,a as i,e as I,f as P,b as s,M as A,D as F,o as Q,c as u,F as O,q as S,g as T,A as j,B as E,x as c,w as M,C as G,p as y,v as z}from"./index.4bfca30a.js";import{a as H}from"./surveys.6dbe5697.js";const J=s("p",{class:"text-danger mb-2"},"\u8ACB\u6CE8\u610F\uFF01\u522A\u9664\u5F8C\u5C07\u7121\u6CD5\u5FA9\u539F",-1),K={class:"d-flex justify-content-end"},W=s("button",{type:"button",class:"btn btn-primary me-2","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1),X={__name:"AlertModal",emits:["deleteQuestionnaire"],setup(V,{expose:f,emit:w}){const r=g(null);return f({modalRef:r}),(k,b)=>(i(),I(A,{ref_key:"modalRef",ref:r,title:"\u662F\u5426\u522A\u9664\u6B64\u554F\u5238\uFF1F","has-footer":!0},{body:P(()=>[J,s("div",K,[W,s("button",{type:"button",class:"btn btn-danger",onClick:b[0]||(b[0]=v=>w("deleteQuestionnaire"))}," \u522A\u9664 ")])]),_:1},512))}},Y={class:"px-4 mt-4"},Z=s("h1",{class:"fs-4 mb-3"}," \u8A55\u50F9\u7BA1\u7406 ",-1),q={class:"card shadow-sm rounded"},ee=s("div",{class:"card-header"},[s("h5",{class:"text-secondary my-2"}," \u8A55\u50F9\u5167\u5BB9\u8A2D\u5B9A ")],-1),te={class:"card-body"},se={class:"table table-borderless"},ae=s("thead",null,[s("tr",{class:"text-secondary"},[s("th",{style:{width:"100px"}}," \u555F\u7528\u72C0\u614B "),s("th",null,"\u8A55\u50F9\u540D\u7A31"),s("th",{class:"w-25"})])],-1),oe={class:"align-middle"},ne={class:"form-check form-switch"},le=["onUpdate:modelValue","checked","onChange"],de=["onUpdate:modelValue","disabled"],ce={class:"d-flex align-items-center"},ie=["onClick"],ue=["onClick"],he=["onClick"],pe=s("span",{class:"material-icons-outlined"}," close ",-1),_e=[pe],re=s("td",null,null,-1),be=s("span",{class:"material-icons-outlined me-1"}," add_circle_outline ",-1),we={__name:"SurveysManage",setup(V){const{apiGetVideoCoursesQuestionnaires:f,apiPostVideoCoursesQuestionnaires:w,apiPutVideoCoursesQuestionnaires:r,apiDeleteVideoCoursesQuestionnaires:k,apiPutVideoCoursesOpenQuestionnaires:b,apiDeleteVideoCoursesCloseQuestionnaires:v}=H,h=F.useLoading(),$=g(null);let C=null;Q(()=>{C=new E($.value.modalRef.hModal)});const m=g([]),p=async()=>{var l,e,n,a;const d=h.show();try{const{questionnaires:t}=await f();m.value=t}catch(t){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(e=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:e.statusCode}:${(a=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:a.message}`)}finally{d.hide()}};Q(p);const B=async d=>{var e,n,a,t;const l=h.show();try{await w(d),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u65B0\u589E\u554F\u5377")}catch(o){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.statusCode}:${(t=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:t.message}`)}finally{l.hide()}},D=async(d,l)=>{var n,a,t,o;const e=h.show();try{await r(d,{question:l.question}),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u66F4\u65B0\u554F\u5377")}catch(_){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(a=(n=_==null?void 0:_.response)==null?void 0:n.data)==null?void 0:a.statusCode}:${(o=(t=_==null?void 0:_.response)==null?void 0:t.data)==null?void 0:o.message}`)}finally{e.hide()}};let x=null;const R=async()=>{var l,e,n,a;const d=h.show();try{C.hide(),await k(x),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u522A\u9664\u554F\u5377")}catch(t){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(e=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:e.statusCode}:${(a=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:a.message}`)}finally{d.hide()}},L=async d=>{var e,n,a,t;const l=h.show();try{await b(d),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u958B\u555F\u554F\u5377")}catch(o){c("danger","\u554F\u5377\u958B\u555F\u5931\u6557",`${(n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.statusCode}:${(t=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:t.message}`)}finally{l.hide()}},N=async d=>{var e,n,a,t;const l=h.show();try{await v(d),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u95DC\u9589\u554F\u5377")}catch(o){c("danger","\u554F\u5377\u95DC\u9589\u5931\u6557",`${(n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.statusCode}:${(t=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:t.message}`)}finally{l.hide()}},U=d=>{x=d,C.show()};return(d,l)=>(i(),u("div",Y,[Z,s("div",q,[ee,s("div",te,[s("table",se,[ae,s("tbody",null,[(i(!0),u(O,null,S(m.value,(e,n)=>(i(),u("tr",{key:e.id},[s("td",oe,[s("div",ne,[e.id?M((i(),u("input",{key:0,id:"flexSwitchCheckDefault","onUpdate:modelValue":a=>e.enable=a,class:"form-check-input",type:"checkbox",role:"switch","true-value":1,"false-value":0,checked:e.enable,onChange:a=>e.enable?L(e.id):N(e.id)},null,40,le)),[[G,e.enable]]):y("",!0)])]),s("td",null,[M(s("input",{"onUpdate:modelValue":a=>e.question=a,type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u5167\u5BB9",disabled:e.id?e.enable:null},null,8,de),[[z,e.question]])]),s("td",ce,[e.id&&!e.enable?(i(),u("button",{key:0,type:"button",class:"btn btn-outline-dark",onClick:a=>D(e.id,e)}," \u5B8C\u6210 ",8,ie)):y("",!0),e.id?y("",!0):(i(),u("button",{key:1,type:"button",class:"btn btn-outline-primary",onClick:a=>B(e)}," \u65B0\u589E ",8,ue)),!e.enable||!e.id?(i(),u("button",{key:2,type:"button",class:"btn d-flex",onClick:a=>e.id?U(e.id):m.value.splice(n,1)},_e,8,he)):y("",!0)])]))),128)),s("tr",null,[re,s("td",null,[s("button",{type:"button",class:"btn d-flex text-primary d-flex",onClick:l[0]||(l[0]=e=>m.value.push({question:""}))},[be,T(" \u65B0\u589E\u8A55\u50F9 ")])])])])])])]),j(X,{ref_key:"alertRef",ref:$,onDeleteQuestionnaire:R},null,512)]))}};export{we as default};
