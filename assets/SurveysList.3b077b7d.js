import{D as S,r as _,o as b,a as d,c as u,b as o,F as h,q as f,A as C,i as B,x as v,h as D,P as G}from"./index.4bfca30a.js";import{C as P}from"./CoursesSurveys.5b8cee7d.js";import{a as A}from"./surveys.6dbe5697.js";const F={class:"surveys px-4 mt-4 position-relative"},M=o("h1",{class:"fs-4 mb-0"}," \u8AB2\u7A0B\u8A55\u50F9\u5217\u8868 ",-1),N={class:"row gx-3 gy-2 align-items-center my-2"},j={class:"col-md-12"},q={class:"row"},E={class:"col-md-4"},O=["value"],U={class:"list-unstyled mb-0"},z={class:"d-flex justify-content-end"},R={__name:"SurveysList",setup(H){const{apiGetVideoCoursesList:w,apiGetVideoCoursesDetail:V,apiGetVideoCoursesSelector:L}=A,g=S.useLoading(),m=_([]),r=_({current_page:1,total:0}),p=async(c,t)=>{var n,l,e,a;const s=g.show();try{const{courses:i,pagination:x}=await w(c,t);m.value=i,r.value=x}catch(i){v("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(l=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:l.statusCode}:${(a=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:a.message}`)}finally{s.hide()}},y=_([]),$=async()=>{var t,s,n,l;const c=g.show();try{const{courses:e}=await L();y.value=e}catch(e){v("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.statusCode}:${(l=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:l.message}`)}finally{c.hide()}},k=async c=>{var s,n,l,e;const t=g.show();try{if(c.target.value){const{review:a}=await V(c.target.value);m.value=Array(a)}else p()}catch(a){v("danger","\u8AB2\u7A0B\u8CC7\u8A0A\u53D6\u5F97\u5931\u6557",`${(n=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:n.statusCode}:${(e=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:e.message}`)}finally{t.hide()}};return b(async()=>{await p(),await $()}),(c,t)=>(d(),u("div",F,[M,o("form",N,[o("div",j,[o("div",q,[o("div",E,[o("select",{class:"form-select w-50",onChange:k},[o("option",{selected:"",value:"",onClick:p}," \u5168\u90E8\u8AB2\u7A0B "),(d(!0),u(h,null,f(y.value,s=>(d(),u("option",{key:s.id,value:s.id},D(s.name),9,O))),128))],32)])])])]),o("ul",U,[(d(!0),u(h,null,f(m.value,s=>(d(),u("li",{key:s,class:"mb-4"},[C(P,{data:s},null,8,["data"])]))),128))]),o("div",z,[C(B(G),{modelValue:r.value.current_page,"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.current_page=s),records:r.value.total,"per-page":20,options:{chunk:6},onPaginate:p},null,8,["modelValue","records"])])]))}};export{R as default};
